(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9481:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(3926)}])},3926:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return B}});var n=r(2010),o=r(4378),a=r.n(o),s=r(2135),c=r.n(s),u=r(5696),i=r.n(u),l=r(6687);const d=e=>{let t;const r=new Set,n=(e,n)=>{const o="function"===typeof e?e(t):e;if(o!==t){const e=t;t=n?o:Object.assign({},t,o),r.forEach((r=>r(t,e)))}},o=()=>t,a={setState:n,getState:o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>r.clear()};return t=e(n,o,a),a};var p=r(6830);const f=e=>{const t="function"===typeof e?(e=>e?d(e):d)(e):e,r=(e,r)=>function(e,t=e.getState,r){const n=(0,p.useSyncExternalStoreWithSelector)(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return(0,l.useDebugValue)(n),n}(t,e,r);return Object.assign(r,t),r};var v=e=>e?f(e):f;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const y=e=>(t,r,n)=>{const o=n.subscribe;n.subscribe=(e,t,r)=>{let a=e;if(t){const o=(null==r?void 0:r.equalityFn)||Object.is;let s=e(n.getState());a=r=>{const n=e(r);if(!o(s,n)){const e=s;t(s=n,e)}},(null==r?void 0:r.fireImmediately)&&t(s,s)}return o(a)};return e(t,r,n)};Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var m,h,b,x=[448,56,7,292,146,73,273,84],g=511;function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,c=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){c=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(c)throw o}}return a}}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"===typeof e)return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(e,t):void 0}}!function(e){e[e.ModePvC=0]="ModePvC",e[e.ModePvP=1]="ModePvP",e[e.ModeCvP=2]="ModeCvP"}(m||(m={})),function(e){e[e.InProgress=0]="InProgress",e[e.P1Victory=1]="P1Victory",e[e.P2Victory=2]="P2Victory",e[e.Tie=3]="Tie"}(h||(h={}));var S=v(y((function(e,t){return{playMode:m.ModePvC,playerNo:0,p1Moves:0,p2Moves:0,pvcRecords:[0,0,0],pvpRecords:[0,0,0],room:"",cells:function(){return Array(9).fill(0).map((function(e,t){return 1<<8-t}))},victoryPattern:function(e){return null!==(b=x.find((function(t){return(t&e)===t})))&&void 0!==b?b:0},gameStatus:function(e,r){return t().victoryPattern(e)?h.P1Victory:t().victoryPattern(r)?h.P2Victory:((e|r)&g)===g?h.Tie:h.InProgress},setPlayMode:function(t){return e({playerNo:0,p1Moves:0,p2Moves:0,playMode:t})},move:function(r){return e((function(e){var n=e.playMode,o=e.playerNo,a=e.p1Moves,s=e.p2Moves,c=e.pvcRecords,u=e.pvpRecords;if(t().gameStatus(a,s)!==h.InProgress)return{playerNo:0,p1Moves:0,p2Moves:0};if(r&a||r&s||!(r&g)||-512&r)return{};var i={playerNo:(o+1)%2,p1Moves:0===o?a|r:a,p2Moves:1===o?s|r:s},l=t().gameStatus(i.p1Moves,i.p2Moves);if(l!==h.InProgress){var d=w(n===m.ModePvC?c:u,3),p=d[0],f=d[1],v=d[2],y=n===m.ModePvC?"pvcRecords":"pvpRecords";switch(l){case h.P1Victory:i[y]=[p+1,f,v];break;case h.P2Victory:i[y]=[p,f+1,v];break;case h.Tie:i[y]=[p,f,v+1]}}return i}))},aiMove:function(){var r=t(),n=r.playMode,o=r.playerNo,a=r.cells,s=r.p1Moves,c=r.p2Moves,u=r.gameStatus,i=r.victoryPattern,l=r.move;if(n===m.ModePvC&&1===o||n===m.ModeCvP&&0===o)if(u(s,c)!==h.InProgress)e({playerNo:n===m.ModePvC?0:1});else{var d=a().filter((function(e){return!((s|c)&e)})),p=n===m.ModePvC?c:s,f=d.find((function(e){return i(p|e)}));if(f)l(f);else{var v=n===m.ModePvC?s:c,y=d.find((function(e){return i(v|e)}));if(y)l(y);else l(d[~~(Math.random()*d.length)])}}},state:function(){return[t().playMode,t().playerNo,t().p1Moves,t().p2Moves].concat(P(t().pvcRecords),P(t().pvpRecords)).join("_")},load:function(t){return e((function(){var e,r,n,o=function(e){var t=null===e||void 0===e?void 0:e.split("_").map((function(e){return parseInt(e)})).filter((function(e){return!isNaN(e)}));if(10===(null===t||void 0===t?void 0:t.length)){var r=w(t,10);return{playMode:r[0],playerNo:r[1],p1Moves:r[2],p2Moves:r[3],pvcRecords:[r[4],r[5],r[6]],pvpRecords:[r[7],r[8],r[9]]}}return null};return null!==(n=null!==(r=null!==(e=o(null!==t&&void 0!==t?t:null))&&void 0!==e?e:o(new URLSearchParams(location.hash.replace(/^#/,"")).get("s")))&&void 0!==r?r:o(localStorage.getItem("gameState")))&&void 0!==n?n:{}}))}}})));S.subscribe((function(e){var t=e.state();localStorage.setItem("gameState",t);var r=new URLSearchParams(location.hash.replace(/^#/,""));r.set("s",t),location.hash="#"+r.toString()}));var N=function(e){return{playMode:e.playMode,playerNo:e.playerNo,p1Moves:e.p1Moves,p2Moves:e.p2Moves,move:e.move,victoryPattern:e.victoryPattern}},C=function(e){var t=e.position,r=S(N),o=r.playMode,a=r.playerNo,s=r.p1Moves,c=r.p2Moves,u=r.move,d=r.victoryPattern,p=d(s)||d(c),f=(0,l.useCallback)((function(){u(t),new Audio("./click.mp3").play()}),[u,t]);return(0,n.jsx)("button",{onClick:f,className:i()("text-7xl sm:text-9xl w-1/3 h-1/3",{blink:p&t,"text-red-700":s&t,"text-green-700":c&t,"opacity-10":0!==p&&!(p&t)}),disabled:o===m.ModePvC&&0!==a,children:s&t?"X":c&t?"O":""},t)},k=function(e){return{playMode:e.playMode,playerNo:e.playerNo,p1Moves:e.p1Moves,p2Moves:e.p2Moves,cells:e.cells,aiMove:e.aiMove,gameStatus:e.gameStatus}},O=function(){var e=S(k),t=e.playMode,r=e.playerNo,o=e.p1Moves,a=e.p2Moves,s=e.cells,c=e.aiMove,u=e.gameStatus;(0,l.useEffect)((function(){(t===m.ModePvC&&1===r||t===m.ModeCvP&&0===r)&&setTimeout((function(){return c()}),300)}),[t,r,c]);var d={blink:u(o,a)===h.Tie};return(0,n.jsxs)("div",{id:"board",className:"relative flex flex-wrap w-72 h-72 sm:w-96 sm:h-96 justify-center",children:[(0,n.jsx)("div",{className:i()("absolute w-72 sm:w-96 border-8 border-black rounded-full",d),style:{top:"33.333333%"}}),(0,n.jsx)("div",{className:i()("absolute w-72 sm:w-96 border-8 border-black rounded-full",d),style:{top:"66.666666%"}}),(0,n.jsx)("div",{className:i()("absolute h-72 sm:h-96 border-8 border-black rounded-full",d),style:{left:"33.333333%"}}),(0,n.jsx)("div",{className:i()("absolute h-72 sm:h-96 border-8 border-black rounded-full",d),style:{left:"66.666666%"}}),s().map((function(e){return(0,n.jsx)(C,{position:e},e)}))]})};function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],s=!0,c=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(u){c=!0,o=u}finally{try{s||null==r.return||r.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var I=function(e){return{playMode:e.playMode,playerNo:e.playerNo,pvcRecords:e.pvcRecords,pvpRecords:e.pvpRecords,p1Moves:e.p1Moves,p2Moves:e.p2Moves,gameStatus:e.gameStatus}},T=function(){var e=S(I),t=e.playMode,r=e.playerNo,o=e.pvcRecords,a=e.pvpRecords,s=e.p1Moves,c=e.p2Moves,u=(0,e.gameStatus)(s,c),l=u===h.Tie,d=E(t===m.ModePvC?o:a,3),p=d[0],f=d[1],v=d[2],y=t===m.ModeCvP?"Computer":"Player 1",b=t===m.ModePvC?"Computer":"Player 2";return(0,n.jsxs)("footer",{className:"relative flex text-xs sm:text-sm justify-center w-72 sm:w-96 pt-8",children:[(0,n.jsx)("div",{className:"absolute top-0 w-72 sm:w-96 text-center text-nowrap text-blue-700",style:{textShadow:"1px 1px #ccc"},children:u!==h.InProgress&&(0,n.jsx)(n.Fragment,{children:"( click any cell to continue )"})}),(0,n.jsxs)("div",{className:i()("flex text-xs sm:text-sm w-20 h-20 sm:w-28 sm:h-28 text-center place-items-center place-content-center text-red-700 border-dashed rounded-full",{"border border-black":!l&&0===r}),children:[y," (X)",(0,n.jsx)("br",{}),p]}),(0,n.jsxs)("div",{className:i()("flex text-xs sm:text-sm w-20 h-20 sm:w-28 sm:h-28 text-center place-items-center place-content-center  border-dashed rounded-full",{"border border-black":l}),children:["Tie",(0,n.jsx)("br",{}),v]}),(0,n.jsxs)("div",{className:i()("flex text-xs sm:text-sm w-20 h-20 sm:w-28 sm:h-28 text-center place-items-center place-content-center text-green-700 border-dashed rounded-full",{"border border-black":!l&&1===r}),children:[b," (O)",(0,n.jsx)("br",{}),f]})]})},R=function(e){return{playMode:e.playMode,setPlayMode:e.setPlayMode}},A=function(){var e=S(R),t=e.playMode,r=e.setPlayMode;return(0,n.jsxs)("nav",{className:"inline-flex rounded-md w-72 sm:w-96 shadow-sm mb-5 justify-center",role:"group",children:[(0,n.jsxs)("button",{type:"button",className:i()("py-2 px-4 text-xs sm:text-sm font-medium rounded-l-lg border border-gray-200",{"text-gray-400 bg-white hover:bg-gray-100 hover:text-blue-700 focus:text-blue-700":t!==m.ModePvC,"text-white bg-blue-700":t===m.ModePvC}),onClick:function(){return r(m.ModePvC)},children:[(0,n.jsx)("svg",{className:"mr-2 w-4 h-4 fill-current inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"PvC"]}),(0,n.jsxs)("button",{type:"button",className:i()("py-2 px-4 text-xs sm:text-sm font-medium border border-gray-200",{"text-gray-400 bg-white hover:bg-gray-100 hover:text-blue-700 focus:text-blue-700":t!==m.ModePvP,"text-white bg-blue-700":t===m.ModePvP}),onClick:function(){return r(m.ModePvP)},children:[(0,n.jsx)("svg",{className:"mr-2 w-4 h-4 fill-current inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"PvP"]}),(0,n.jsxs)("button",{type:"button",className:i()("py-2 px-4 text-xs sm:text-sm font-medium rounded-r-md border border-gray-200",{"text-gray-400 bg-white hover:bg-gray-100 hover:text-blue-700 focus:text-blue-700":t!==m.ModeCvP,"text-white bg-blue-700":t===m.ModeCvP}),onClick:function(){return r(m.ModeCvP)},children:[(0,n.jsx)("svg",{className:"mr-2 w-4 h-4 fill-current inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"CvP"]})]})},V=r(3031),L=r.n(V);function U(e,t,r,n,o,a,s){try{var c=e[a](s),u=c.value}catch(i){return void r(i)}c.done?t(u):Promise.resolve(u).then(n,o)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){U(a,n,o,s,c,"next",e)}function c(e){U(a,n,o,s,c,"throw",e)}s(void 0)}))}}var W="https://keyvalue.immanuel.co/api/KeyVal";var X=function(e){return{load:e.load}},B=function(){var e=S(X).load;return(0,l.useEffect)((function(){return e()}),[e]),function(e){var t=(0,l.useState)(""),r=t[0],n=t[1],o=(0,l.useRef)(0);(0,l.useEffect)((function(){function t(){return r.apply(this,arguments)}function r(){return(r=z(L().mark((function e(){var r,n,a,c;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!s||S.getState().playMode===m.ModePvC){e.next=9;break}return e.next=4,fetch("".concat(W,"/GetValue/").concat(s,"/g"));case 4:return e.next=6,e.sent.json();case 6:r=e.sent,(n=/^(\d+)_(.+)$/.exec(r))&&(a=parseInt(n[1]),o.current<=a&&(o.current=a,c=n[2],S.getState().playMode===m.ModePvP&&S.getState().state()!==c&&S.getState().load(c)));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:setTimeout((function(){return t()}),500);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function a(){return(a=z(L().mark((function e(){var r,a,c;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(W,"/GetAppKey"));case 3:return e.next=5,e.sent.json();case 5:return r=e.sent,e.next=8,fetch("".concat(W,"/UpdateValue/").concat(s,"/g/").concat(encodeURIComponent(o.current+"_"+S.getState().state())),{method:"POST"});case 8:return e.next=10,e.sent.json();case 10:a=e.sent,r&&a&&(n(r),(c=new URLSearchParams(location.hash.replace(/^#/,""))).set("r",r),location.hash="#"+c.toString()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error(e.t0);case 17:setTimeout(t,0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}S.subscribe((function(e,t){if(e.playMode!==t.playMode&&(o.current=0),s&&e.playMode===m.ModePvP)return o.current++,fetch("".concat(W,"/UpdateValue/").concat(s,"/g/").concat(encodeURIComponent(o.current+"_"+e.state())),{method:"POST"})}));var s=null!==e&&void 0!==e?e:new URLSearchParams(location.hash.replace(/^#/,"")).get("r");s?(n(s),setTimeout(t,0)):setTimeout((function(){return a.apply(this,arguments)}),0)}),[])}(),(0,n.jsxs)("div",{className:c().container,children:[(0,n.jsxs)(a(),{children:[(0,n.jsx)("title",{children:"Tic-Tac-Toe"}),(0,n.jsx)("meta",{name:"description",content:"Tic-Tac-Toe"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)("main",{className:"flex flex-col flex-wrap min-h-screen place-content-center place-items-center",children:[(0,n.jsx)("button",{type:"button",onClick:function(){return e("0_0_0_0_0_0_0_0_0_0")},className:"text-gray-900 bg-white border border-gray-300 hover:bg-gray-100 rounded-full text-xs py-2 m-2.5 px-2.5 top-0 right-0 absolute",children:"reset"}),(0,n.jsx)(A,{}),(0,n.jsx)(O,{}),(0,n.jsx)(T,{})]})]})}},2135:function(e){e.exports={main:"Home_main__nLjiQ",grid:"Home_grid__GxQ85"}},4378:function(e,t,r){e.exports=r(6697)},4797:function(e,t,r){"use strict";var n=r(6687);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=n.useState,s=n.useEffect,c=n.useLayoutEffect,u=n.useDebugValue;function i(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(n){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),o=n[0].inst,l=n[1];return c((function(){o.value=r,o.getSnapshot=t,i(o)&&l({inst:o})}),[e,r,t]),s((function(){return i(o)&&l({inst:o}),e((function(){i(o)&&l({inst:o})}))}),[e]),u(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},8382:function(e,t,r){"use strict";var n=r(6687),o=r(4754);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=o.useSyncExternalStore,c=n.useRef,u=n.useEffect,i=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var d=c(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=i((function(){function e(e){if(!u){if(u=!0,s=e,e=n(e),void 0!==o&&p.hasValue){var t=p.value;if(o(t,e))return c=t}return c=e}if(t=c,a(s,e))return t;var r=n(e);return void 0!==o&&o(t,r)?t:(s=e,c=r)}var s,c,u=!1,i=void 0===r?null:r;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]}),[t,r,n,o]);var f=s(e,d[0],d[1]);return u((function(){p.hasValue=!0,p.value=f}),[f]),l(f),f}},4754:function(e,t,r){"use strict";e.exports=r(4797)},6830:function(e,t,r){"use strict";e.exports=r(8382)},5696:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var s=o.apply(null,r);s&&e.push(s)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var c in r)n.call(r,c)&&r[c]&&e.push(c);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()}},function(e){e.O(0,[774,888,179],(function(){return t=9481,e(e.s=t);var t}));var t=e.O();_N_E=t}]);